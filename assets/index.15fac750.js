import{m as v,w as b,R as r,d,a as w,j as i,b as _,e as $}from"./index.b35fedd9.js";import{_ as f,I as A,r as O}from"./index.9d91e62d.js";import{e as j,u as M,C as T,w as B,M as E,a as R,r as I,h as x}from"./index.e0eaf871.js";import{B as z}from"./index.8933497c.js";import{A as k}from"./index.e2c1d20b.js";const c="adm-space",D={direction:"horizontal"},F=n=>{const e=v(D,n),{direction:o,onClick:a}=e;return b(e,r.createElement("div",{className:d(c,{[`${c}-wrap`]:e.wrap,[`${c}-block`]:e.block,[`${c}-${o}`]:!0,[`${c}-align-${e.align}`]:!!e.align,[`${c}-justify-${e.justify}`]:!!e.justify}),onClick:a},r.Children.map(e.children,t=>t!=null&&r.createElement("div",{className:`${c}-item`},t))))};var L=F;const U=n=>{const{action:e}=n,[o,a]=w.exports.useState(!1);function t(){return f(this,void 0,void 0,function*(){a(!0);try{yield n.onAction(),a(!1)}catch(m){throw a(!1),m}})}return b(n.action,i(z,{onClick:t,className:d("adm-modal-button",{"adm-modal-button-primary":n.action.primary}),fill:n.action.primary?"solid":"none",size:n.action.primary?"large":"middle",block:!0,color:e.danger?"danger":"primary",loading:o,disabled:e.disabled,children:e.text},e.key))},q={visible:!1,actions:[],closeOnAction:!1,closeOnMaskClick:!1,stopPropagation:["click"],showCloseButton:!1,getContainer:null,disableBodyScroll:!0},N=n=>{const e=v(q,n),o=j(),a=M({scale:e.visible?1:.8,opacity:e.visible?1:0,config:{mass:1.2,tension:200,friction:25,clamp:!0},onStart:()=>{m(!0)},onRest:()=>{var s,u;o.current||(m(e.visible),e.visible?(s=e.afterShow)===null||s===void 0||s.call(e):(u=e.afterClose)===null||u===void 0||u.call(e))}}),[t,m]=w.exports.useState(e.visible),S=_("div",{className:d(l("body"),e.image&&l("with-image"),e.bodyClassName),style:e.bodyStyle,children:[e.showCloseButton&&i("a",{className:d(l("close"),"adm-plain-anchor"),onClick:e.onClose,children:i(T,{})}),!!e.image&&i("div",{className:l("image-container"),children:i(A,{src:e.image,alt:"modal header image",width:"100%"})}),!!e.header&&i("div",{className:l("header"),children:i(k,{children:e.header})}),!!e.title&&i("div",{className:l("title"),children:e.title}),i("div",{className:l("content"),children:typeof e.content=="string"?i(k,{children:e.content}):e.content}),i(L,{direction:"vertical",block:!0,className:d(l("footer"),e.actions.length===0&&l("footer-empty")),children:e.actions.map((s,u)=>i(U,{action:s,onAction:()=>f(void 0,void 0,void 0,function*(){var p,y,C;yield Promise.all([(p=s.onClick)===null||p===void 0?void 0:p.call(s),(y=e.onAction)===null||y===void 0?void 0:y.call(e,s,u)]),e.closeOnAction&&((C=e.onClose)===null||C===void 0||C.call(e))})},s.key))})]}),P=B(e.stopPropagation,b(e,r.createElement("div",{className:l(),style:{display:t?"unset":"none"}},i(E,{visible:e.visible,onMaskClick:e.closeOnMaskClick?e.onClose:void 0,style:e.maskStyle,className:d(l("mask"),e.maskClassName),disableBodyScroll:e.disableBodyScroll}),r.createElement("div",{className:l("wrap"),style:{pointerEvents:e.visible?"unset":"none"}},r.createElement(R.div,{style:a},S)))));return I(e.getContainer,P)};function l(n=""){return"adm-modal"+(n&&"-")+n}const h=new Set;function g(n){const e=O(r.createElement(N,Object.assign({},n,{afterClose:()=>{var o;h.delete(e.close),(o=n.afterClose)===null||o===void 0||o.call(n)}})));return h.add(e.close),e}function G(n){const e={confirmText:x().locale.Modal.ok},o=v(e,n);return new Promise(a=>{g(Object.assign(Object.assign({},o),{closeOnAction:!0,actions:[{key:"confirm",text:o.confirmText,primary:!0}],onAction:o.onConfirm,onClose:()=>{var t;(t=o.onClose)===null||t===void 0||t.call(o),a()}}))})}const H={confirmText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"};function J(n){const{locale:e}=x(),o=v(H,{confirmText:e.common.confirm,cancelText:e.common.cancel},n);return new Promise(a=>{g(Object.assign(Object.assign({},o),{closeOnAction:!0,onClose:()=>{var t;(t=o.onClose)===null||t===void 0||t.call(o),a(!1)},actions:[{key:"confirm",text:o.confirmText,primary:!0,onClick:()=>f(this,void 0,void 0,function*(){var t;yield(t=o.onConfirm)===null||t===void 0?void 0:t.call(o),a(!0)})},{key:"cancel",text:o.cancelText,onClick:()=>f(this,void 0,void 0,function*(){var t;yield(t=o.onCancel)===null||t===void 0?void 0:t.call(o),a(!1)})}]}))})}function K(){h.forEach(n=>{n()})}var Z=$(N,{show:g,alert:G,confirm:J,clear:K});export{Z as M};
