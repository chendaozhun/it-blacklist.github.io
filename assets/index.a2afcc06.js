import{a as k,w as x,j as i,d as m,m as y,b as O,R as u,e as T}from"./index.b35fedd9.js";import{_ as v,I as j,r as B}from"./index.9d91e62d.js";import{e as D,u as E,M,a as R,r as I,w as $,h as N}from"./index.e0eaf871.js";import{B as F}from"./index.8933497c.js";import{A as C}from"./index.e2c1d20b.js";const L=t=>{const{action:e}=t,[o,l]=k.exports.useState(!1);function n(){return v(this,void 0,void 0,function*(){l(!0);try{yield t.onAction(),l(!1)}catch(c){throw l(!1),c}})}return x(t.action,i(F,{onClick:n,className:m("adm-dialog-button",{"adm-dialog-button-bold":e.bold}),fill:"none",shape:"rectangular",block:!0,color:e.danger?"danger":"primary",loading:o,disabled:e.disabled,children:e.text},e.key))},U={visible:!1,actions:[],closeOnAction:!1,closeOnMaskClick:!1,stopPropagation:["click"],getContainer:null,disableBodyScroll:!0},A=t=>{const e=y(U,t),o=D(),l=E({scale:e.visible?1:.8,opacity:e.visible?1:0,config:{mass:1.2,tension:200,friction:25,clamp:!0},onStart:()=>{c(!0)},onRest:()=>{var s,r;o.current||(c(e.visible),e.visible?(s=e.afterShow)===null||s===void 0||s.call(e):(r=e.afterClose)===null||r===void 0||r.call(e))}}),[n,c]=k.exports.useState(e.visible),w=O("div",{className:m(a("body"),e.image&&a("with-image"),e.bodyClassName),style:e.bodyStyle,children:[!!e.image&&i("div",{className:a("image-container"),children:i(j,{src:e.image,alt:"dialog header image",width:"100%"})}),!!e.header&&i("div",{className:a("header"),children:i(C,{children:e.header})}),!!e.title&&i("div",{className:a("title"),children:e.title}),i("div",{className:m(a("content"),!e.content&&a("content-empty")),children:typeof e.content=="string"?i(C,{children:e.content}):e.content}),i("div",{className:a("footer"),children:e.actions.map((s,r)=>{const _=Array.isArray(s)?s:[s];return i("div",{className:a("action-row"),children:_.map((d,P)=>i(L,{action:d,onAction:()=>v(void 0,void 0,void 0,function*(){var f,g,p;yield Promise.all([(f=d.onClick)===null||f===void 0?void 0:f.call(d),(g=e.onAction)===null||g===void 0?void 0:g.call(e,d,P)]),e.closeOnAction&&((p=e.onClose)===null||p===void 0||p.call(e))})},d.key))},r)})})]}),S=x(e,u.createElement("div",{className:a(),style:{display:n?"unset":"none"}},i(M,{visible:e.visible,onMaskClick:e.closeOnMaskClick?e.onClose:void 0,style:e.maskStyle,className:m(a("mask"),e.maskClassName),disableBodyScroll:e.disableBodyScroll}),u.createElement("div",{className:a("wrap"),style:{pointerEvents:e.visible?"unset":"none"}},u.createElement(R.div,{style:l},w))));return I(e.getContainer,$(e.stopPropagation,S))};function a(t=""){return"adm-dialog"+(t&&"-")+t}const b=new Set;function h(t){const e=B(u.createElement(A,Object.assign({},t,{afterClose:()=>{var o;b.delete(e.close),(o=t.afterClose)===null||o===void 0||o.call(t)}})));return b.add(e.close),e}function q(t){const e={confirmText:N().locale.Dialog.ok},o=y(e,t);return new Promise(l=>{h(Object.assign(Object.assign({},o),{closeOnAction:!0,actions:[{key:"confirm",text:o.confirmText}],onAction:o.onConfirm,onClose:()=>{var n;(n=o.onClose)===null||n===void 0||n.call(o),l()}}))})}const z={confirmText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"};function G(t){const{locale:e}=N(),o=y(z,{confirmText:e.common.confirm,cancelText:e.common.cancel},t);return new Promise(l=>{h(Object.assign(Object.assign({},o),{closeOnAction:!0,onClose:()=>{var n;(n=o.onClose)===null||n===void 0||n.call(o),l(!1)},actions:[[{key:"cancel",text:o.cancelText,onClick:()=>v(this,void 0,void 0,function*(){var n;yield(n=o.onCancel)===null||n===void 0?void 0:n.call(o),l(!1)})},{key:"confirm",text:o.confirmText,bold:!0,onClick:()=>v(this,void 0,void 0,function*(){var n;yield(n=o.onConfirm)===null||n===void 0?void 0:n.call(o),l(!0)})}]]}))})}function H(){b.forEach(t=>{t()})}var X=T(A,{show:h,alert:q,confirm:G,clear:H});export{X as D};
